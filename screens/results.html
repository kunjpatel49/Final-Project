<meta name="viewport" content="width=device-width, initial-scale=1">
<ul id="list" class="list">
</ul>

<script>
    var listIDs = [];
    document.body.style.backgroundImage = "linear-gradient(120deg, #3498db, #8e44ad)";
    console.log(userInput);
    var favBtn = '<button data-mdc-auto-init="MDCIconButtonToggle"'
    +'class="mdc-list-item__meta mdc-icon-button add-to-favorites"'+
    'aria-label="Add to favorites"'+
    'aria-hidden="true"'+
    'aria-pressed="false">'+
    '<i class="material-icons mdc-icon-button__icon mdc-icon-button__icon--on">favorite</i>'+
    '<i class="material-icons mdc-icon-button__icon">favorite_border</i></button>';
    $.get(endpoint + "&query=" + userInput, function (response) {
        resp = response.results;
        console.log(response);

        // if no results are found
        if(resp.length == 0){
            $('ul.list').append('<li><span>Sorry No results found, Please search again!'+
                    '<a id="search" class="search-btn" href="index.html">' +
                '<i class="fas fa-search"></i></a>' +
                '</span></li>');
        }

        for (var i = 0; i < resp.length; i++) {
            var listID = resp[i].display_title.split(' ').join('-');
            listIDs.push("#"+listID);

            // clean up for empty ratings
            if(resp[i].mpaa_rating == ""){
                var rating = "N/A";
            }
            else{
                var rating = resp[i].mpaa_rating;
            }

            $('ul.list').append("<li id=" + listID + "><span>"+
                "<img src='" + resp[i].multimedia.src + "'><br>" +
                "Movie: " + resp[i].display_title + 
                " Rated(" + rating + ")<br>"
                + 
            '<p>'+ resp[i].headline +'</p>'+
            '<p>Short Review: ' + resp[i].summary_short +'</p>'+
            '<p>'+ resp[i].link.suggested_link_text +' <a href="'+ resp[i].link.url+'">here</a>.</p>'
            +
                
                favBtn +
                 "</span></li>");
            // db.movies.put({titles: resp[i].display_title, rating: resp[i].mpaa_rating});
        }
        return;
    });
    console.log(listIDs);
</script>